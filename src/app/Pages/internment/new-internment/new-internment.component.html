<div class="new-internment">
  <div class="control">
    <button mat-raised-button color="primary" (click)="back()">Atras</button>
    <button mat-raised-button color="primary" (click)="save()">Guardar</button>
  </div>
  <mat-card>
    <mat-card-header>
      <mat-card-title class="title">Vehículo</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="formInternment">
        <!-- <mat-form-field appearance="outline">
          <mat-label>Fecha de Ingreso</mat-label>
          <input matInput [matDatepicker]="dp1" [value]="dateTime" disabled>
          <mat-datepicker-toggle matIconSuffix [for]="dp1"></mat-datepicker-toggle>
          <mat-datepicker #dp1></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Hora de Ingreso</mat-label>
          <input matInput disabled value={{formattedTime}}>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Fecha de Salida</mat-label>
          <input matInput [min]="minDate" [matDatepicker]="dp2" formControlName="output_date">
          <mat-datepicker-toggle matIconSuffix [for]="dp2"></mat-datepicker-toggle>
          <mat-datepicker #dp2></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Hora de Salida</mat-label>
          <input matInput formControlName="output_time" placeholder="HH:mm:ss">
          <mat-error *ngIf="this.formInternment.get('output_time')?.hasError('required') && this.formInternment.get('output_time')?.touched">Este campo no es válido</mat-error>
        </mat-form-field> -->
        <div formGroupName="vehicle" class="style-form">
          <mat-form-field appearance="outline">
            <mat-label>Tipo de vehículo</mat-label>
            <mat-select formControlName="type" (selectionChange)="typeChange($event.value)">
              <mat-option *ngFor="let type of vehicleType" [value]="type.id">{{type.name}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Marca del vehículo</mat-label>
            <mat-select formControlName="brand" (selectionChange)="brandChange($event.value)">
              <mat-option *ngFor="let brand of vehicleBrand" [value]="brand.id">{{brand.brand}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Placa del vehículo</mat-label>
            <input matInput type="text" formControlName="plate" (change)="plateChange($event)">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Color del vehículo</mat-label>
            <input matInput type="text" formControlName="color" (change)="colorChange($event)">
          </mat-form-field>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  <br>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Boleta de internamiento</mat-card-title>
      <!-- <mat-cardtitle>Datos vehículares</mat-cardtitle> -->
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="formInternment">
        <div formGroupName="admission_ticket">
          <p>Datos del propietario</p>
          <div formGroupName="owner" class="style-form">
            <mat-form-field appearance="outline">
              <mat-label>Nombre</mat-label>
              <input matInput type="text" formControlName="name">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Apellidos</mat-label>
              <input matInput type="text" formControlName="lastname">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Dirección</mat-label>
              <input matInput type="text" formControlName="address">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Telefono</mat-label>
              <input matInput type="text" formControlName="phone">
            </mat-form-field>
          </div>
          <p>Datos remitente</p>
          <div formGroupName="remitter" class="style-form">
            <mat-form-field appearance="outline">
              <mat-label>Autoridad</mat-label>
              <input matInput type="text" formControlName="authority">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Papeleta</mat-label>
              <input matInput type="text" formControlName="ballot">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Infracción</mat-label>
              <mat-select formControlName="infraction" (selectionChange)="infractionChange($event.value)">
                <mat-option *ngFor="let infraction of listInfraction" [value]="infraction.id">{{infraction.name}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <p>Datos del vehículo</p>
          <div formGroupName="vehicle" class="style-form">
            <mat-form-field appearance="outline">
              <mat-label>Tipo de vehículo</mat-label>
              <mat-select formControlName="type">
                <mat-option *ngFor="let type of vehicleType" [value]="type.id">{{type.name}}</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Marca del vehículo</mat-label>
              <mat-select formControlName="brand">
                <mat-option *ngFor="let brand of vehicleBrand" [value]="brand.id">{{brand.brand}}</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Placa del vehículo</mat-label>
              <input matInput type="text" formControlName="plate">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Color del vehículo</mat-label>
              <input matInput type="text" formControlName="color">
            </mat-form-field>
          </div>
          <p>Datos extras</p>
          <div class="style-form">
            <mat-form-field appearance="outline">
              <mat-label>Numero de Boleta de internamiento</mat-label>
              <input matInput type="text" formControlName="number">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Encargado</mat-label>
              <input matInput type="text" formControlName="in_charge">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Observaciones</mat-label>
              <input matInput type="text" formControlName="observations">
            </mat-form-field>
          </div>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  <br>
  <mat-card>
    <mat-card-header>
      <mat-card-title class="title">Extra</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="formInternment" class="style-form">
          <mat-form-field appearance="outline">
            <mat-label>Infracción</mat-label>
            <mat-select formControlName="infraction">
              <mat-option *ngFor="let infraction of listInfraction" [value]="infraction.id">{{infraction.name}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Orden de libertad</mat-label>
            <input matInput type="text" formControlName="freedom_number">
          </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>
</div>
